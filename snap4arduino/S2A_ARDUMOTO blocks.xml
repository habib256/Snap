<blocks app="Snap4Arduino 5.1.0
, http://snap4arduino.rocks" version="1"><block-definition s="$robot Jouer un son à la fréquence de %&apos;FREQ&apos; kHz et de durée %&apos;DURATION&apos; ms" type="command" category="sound"><header></header><code></code><translations></translations><inputs><input type="%n">1000</input><input type="%n">500</input></inputs><script><block s="doIfElse"><block s="reportAnd"><block s="reportGreaterThan"><block var="FREQ"/><l>-1</l></block><block s="reportGreaterThan"><block var="DURATION"/><l>-1</l></block></block><script><block s="doRun"><block s="reportURL"><block s="reportJoinWords"><list><block var="S2FM_IP"/><l>:50209/play_tone/</l><block var="BUZZER"/><l>/</l><block var="FREQ"/><l>/</l><block var="DURATION"/></list></block></block><list></list></block><block s="doWait"><block s="reportQuotient"><block var="DURATION"/><l>1000</l></block></block></script><script><custom-block s="throw %s"><l>catchtag</l></custom-block></script></block></script></block-definition><block-definition s="$robot Arrêter le son" type="command" category="sound"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doRun"><block s="reportURL"><block s="reportJoinWords"><list><block var="S2FM_IP"/><l>:50209/tone_off/</l><block var="BUZZER"/></list></block></block><list></list></block></script></block-definition><block-definition s="$robot Tourner le servo-moteur sur la broche %&apos;PIN&apos; de degrés %&apos;DEGREES&apos;" type="command" category="motion"><header></header><code></code><translations></translations><inputs><input type="%n">5</input><input type="%n">90</input></inputs><script><block s="doIfElse"><block s="reportAnd"><block s="reportAnd"><block s="reportGreaterThan"><block var="PIN"/><l>-1</l></block><block s="reportLessThan"><block var="PIN"/><l>100</l></block></block><block s="reportAnd"><block s="reportGreaterThan"><block var="DEGREES"/><l>-1</l></block><block s="reportLessThan"><block var="DEGREES"/><l>181</l></block></block></block><script><block s="doRun"><block s="reportURL"><block s="reportJoinWords"><list><block var="S2FM_IP"/><l>:50209/set_servo_position/</l><block var="PIN"/><l>/</l><block var="DEGREES"/></list></block></block><list></list></block></script><script><custom-block s="throw %s"><l>catchtag</l></custom-block></script></block></script></block-definition><block-definition s="$robot Initialisation $gears" type="command" category="motion"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doSetVar"><l>S2FM_IP</l><l>192.168.43.50</l></block><block s="doSetVar"><l>PWM_A</l><l>3</l></block><block s="doSetVar"><l>PWM_B</l><l>11</l></block><block s="doSetVar"><l>DIR_A</l><l>12</l></block><block s="doSetVar"><l>DIR_B</l><l>13</l></block><block s="doSetVar"><l>BUZZER</l><l>8</l></block><custom-block s="s2a_fm %s la broche digital %n comme une %txt"><l>Activer</l><block var="PWM_A"/><l>PWM</l></custom-block><custom-block s="s2a_fm %s la broche digital %n comme une %txt"><l>Activer</l><block var="PWM_B"/><l>PWM</l></custom-block><custom-block s="s2a_fm %s la broche digital %n comme une %txt"><l>Activer</l><block var="DIR_A"/><l>Sortie</l></custom-block><custom-block s="s2a_fm %s la broche digital %n comme une %txt"><l>Activer</l><block var="DIR_B"/><l>Sortie</l></custom-block><custom-block s="s2a_fm %s la broche digital %n comme une %txt"><l>Activer</l><block var="BUZZER"/><l>Son</l></custom-block><block s="clear"></block><block s="hide"></block><custom-block s="Ecrire %txt à la taille %n en x %n et y %n"><l>ArduMotoRobot</l><l>36</l><l>-140</l><l>-150</l></custom-block><custom-block s="$robot Stop $pause"></custom-block><block s="doSetTempo"><l>60</l></block><custom-block s="$robot Jouer la mélodie n° %n"><l>5</l></custom-block></script></block-definition><block-definition s="$robot Stop $pause" type="command" category="motion"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doSetVar"><l>VITESSE</l><l>0</l></block><custom-block s="s2a_fm Ecrire sur la broch (PWM): %n la valeur %n"><block var="PWM_A"/><block var="VITESSE"/></custom-block><custom-block s="s2a_fm Ecrire sur la broch (PWM): %n la valeur %n"><block var="PWM_B"/><block var="VITESSE"/></custom-block></script></block-definition><block-definition s="$robot Vitesse %&apos;vitesse&apos;" type="command" category="motion"><header></header><code></code><translations></translations><inputs><input type="%n"></input></inputs><script><block s="doSetVar"><l>VITESSE</l><block var="vitesse"/></block><custom-block s="s2a_fm Ecrire sur la broch (PWM): %n la valeur %n"><block var="PWM_A"/><block var="VITESSE"/></custom-block><custom-block s="s2a_fm Ecrire sur la broch (PWM): %n la valeur %n"><block var="PWM_B"/><block s="reportDifference"><block var="VITESSE"/><l>40</l></block></custom-block></script></block-definition><block-definition s="$robot Tourne à gauche $arrowLeft" type="command" category="motion"><header></header><code></code><translations></translations><inputs></inputs><script><custom-block s="s2a_fm Mettre létat logique de la broche Digital à %n %n"><block var="DIR_A"/><l>0</l></custom-block><custom-block s="s2a_fm Mettre létat logique de la broche Digital à %n %n"><block var="DIR_B"/><l>0</l></custom-block></script></block-definition><block-definition s="$robot Avance $arrowUp" type="command" category="motion"><header></header><code></code><translations></translations><inputs></inputs><script><custom-block s="s2a_fm Mettre létat logique de la broche Digital à %n %n"><block var="DIR_A"/><l>0</l></custom-block><custom-block s="s2a_fm Mettre létat logique de la broche Digital à %n %n"><block var="DIR_B"/><l>1</l></custom-block></script></block-definition><block-definition s="$robot Recule $arrowDown" type="command" category="motion"><header></header><code></code><translations></translations><inputs></inputs><script><custom-block s="s2a_fm Mettre létat logique de la broche Digital à %n %n"><block var="DIR_A"/><l>1</l></custom-block><custom-block s="s2a_fm Mettre létat logique de la broche Digital à %n %n"><block var="DIR_B"/><l>0</l></custom-block></script></block-definition><block-definition s="$robot Tourne à droite $arrowRight" type="command" category="motion"><header></header><code></code><translations></translations><inputs></inputs><script><custom-block s="s2a_fm Mettre létat logique de la broche Digital à %n %n"><block var="DIR_A"/><l>1</l></custom-block><custom-block s="s2a_fm Mettre létat logique de la broche Digital à %n %n"><block var="DIR_B"/><l>1</l></custom-block></script></block-definition><block-definition s="$robot Jouer la mélodie n° %&apos;melodie&apos;" type="command" category="sound"><header></header><code></code><translations></translations><inputs><input type="%n">1</input></inputs><script><block s="doDeclareVariables"><list><l>DO3</l><l>DO3#</l><l>RE3</l><l>RE3#</l><l>MI3</l><l>FA3</l><l>FA3#</l><l>SOL3</l><l>SOL3#</l><l>LA3</l><l>LA3#</l><l>SI3</l><l>DO4</l><l>DO4#</l><l>RE4</l><l>RE4#</l><l>MI4</l><l>FA4</l><l>FA4#</l><l>SOL4</l><l>SOL4#</l><l>LA4</l><l>LA4#</l><l>SI4</l><l>DO5</l><l>DO5#</l><l>RE5</l><l>RE5#</l><l>MI5</l><l>FA5</l><l>FA5#</l><l>SOL5</l><l>quaternote_duration_ms</l><l>quaternote_duration_s</l><l>partition_notes</l><l>partition_temps</l></list></block><block s="doDeclareVariables"><list><l>SOL5#</l><l>LA5</l><l>LA5#</l><l>SI5</l><l>DO6</l><l>DO6#</l><l>RE6</l><l>RE6#</l><l>MI6</l><l>FA6</l><l>FA6#</l><l>SOL6</l><l>SOL6#</l><l>LA6</l><l>LA6#</l><l>SI6</l><l>DO7</l><l>DO7#</l><l>RE7</l><l>RE7#</l><l>MI7</l><l>FA7</l><l>FA7#</l><l>SOL7</l><l>SOL7#</l><l>LA7</l><l>LA7#</l><l>SI7</l><l>DO8</l><l>SILENCE</l></list></block><block s="doSetVar"><l>SILENCE</l><l>0</l></block><block s="doSetVar"><l>DO3</l><l>131</l></block><block s="doSetVar"><l>DO3#</l><l>139</l></block><block s="doSetVar"><l>RE3</l><l>147</l></block><block s="doSetVar"><l>RE3#</l><l>156</l></block><block s="doSetVar"><l>MI3</l><l>165</l></block><block s="doSetVar"><l>FA3</l><l>175</l></block><block s="doSetVar"><l>FA3#</l><l>185</l></block><block s="doSetVar"><l>SOL3</l><l>196</l></block><block s="doSetVar"><l>SOL3#</l><l>208</l></block><block s="doSetVar"><l>LA3</l><l>220</l></block><block s="doSetVar"><l>LA3#</l><l>233</l></block><block s="doSetVar"><l>SI3</l><l>247</l></block><block s="doSetVar"><l>DO4</l><l>262</l></block><block s="doSetVar"><l>DO4#</l><l>277</l></block><block s="doSetVar"><l>RE4</l><l>294</l></block><block s="doSetVar"><l>RE4#</l><l>311</l></block><block s="doSetVar"><l>MI4</l><l>330</l></block><block s="doSetVar"><l>FA4</l><l>349</l></block><block s="doSetVar"><l>FA4#</l><l>370</l></block><block s="doSetVar"><l>SOL4</l><l>392</l></block><block s="doSetVar"><l>SOL4#</l><l>415</l></block><block s="doSetVar"><l>LA4</l><l>440</l></block><block s="doSetVar"><l>LA4#</l><l>466</l></block><block s="doSetVar"><l>SI4</l><l>494</l></block><block s="doSetVar"><l>DO5</l><l>523</l></block><block s="doSetVar"><l>DO5#</l><l>554</l></block><block s="doSetVar"><l>RE5</l><l>587</l></block><block s="doSetVar"><l>RE5#</l><l>622</l></block><block s="doSetVar"><l>MI5</l><l>659</l></block><block s="doSetVar"><l>FA5</l><l>698</l></block><block s="doSetVar"><l>FA5#</l><l>740</l></block><block s="doSetVar"><l>SOL5</l><l>784</l></block><block s="doSetVar"><l>SOL5#</l><l>831</l></block><block s="doSetVar"><l>LA5</l><l>880</l></block><block s="doSetVar"><l>LA5#</l><l>932</l></block><block s="doSetVar"><l>SI5</l><l>988</l></block><block s="doSetVar"><l>DO6</l><l>1047</l></block><block s="doSetVar"><l>DO6#</l><l>1109</l></block><block s="doSetVar"><l>RE6</l><l>1175</l></block><block s="doSetVar"><l>RE6#</l><l>1245</l></block><block s="doSetVar"><l>MI6</l><l>1319</l></block><block s="doSetVar"><l>FA6</l><l>1397</l></block><block s="doSetVar"><l>FA6#</l><l>1480</l></block><block s="doSetVar"><l>SOL6</l><l>1568</l></block><block s="doSetVar"><l>SOL6#</l><l>1661</l></block><block s="doSetVar"><l>LA6</l><l>1760</l></block><block s="doSetVar"><l>LA6#</l><l>1865</l></block><block s="doSetVar"><l>SI6</l><l>1976</l></block><block s="doSetVar"><l>DO7</l><l>2093</l></block><block s="doSetVar"><l>DO7#</l><l>2217</l></block><block s="doSetVar"><l>RE7</l><l>2349</l></block><block s="doSetVar"><l>RE7#</l><l>2489</l></block><block s="doSetVar"><l>MI7</l><l>2637</l></block><block s="doSetVar"><l>FA7</l><l>2794</l></block><block s="doSetVar"><l>FA7#</l><l>2960</l></block><block s="doSetVar"><l>SOL7</l><l>3136</l></block><block s="doSetVar"><l>SOL7#</l><l>3322</l></block><block s="doSetVar"><l>LA7</l><l>3520</l></block><block s="doSetVar"><l>LA7#</l><l>3729</l></block><block s="doSetVar"><l>SI7</l><l>3951</l></block><block s="doSetVar"><l>DO8</l><l>4186</l></block><block s="doSetVar"><l>quaternote_duration_ms</l><block s="reportQuotient"><block s="reportProduct"><l>1000</l><block s="getTempo"></block></block><l>60</l></block></block><block s="doSetVar"><l>quaternote_duration_s</l><block s="reportQuotient"><block s="reportProduct"><l>1</l><block s="getTempo"></block></block><l>60</l></block></block><block s="doIf"><block s="reportEquals"><block var="melodie"/><l>7</l></block><script><block s="doSetVar"><l>partition_notes</l><block s="reportNewList"><list><block var="SOL6"/><block var="MI7"/><block var="SOL7"/><block var="LA7"/><block var="SILENCE"/><block var="FA7"/><block var="SOL7"/><block var="SILENCE"/><block var="MI7"/><block var="SILENCE"/><block var="DO7"/><block var="RE7"/><block var="SI6"/><block var="SILENCE"/><block var="SILENCE"/></list></block></block><block s="doSetVar"><l>partition_temps</l><block s="reportNewList"><list><l>9</l><l>9</l><l>9</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l></list></block></block></script></block><block s="doIf"><block s="reportEquals"><block var="melodie"/><l>6</l></block><script><block s="doSetVar"><l>partition_notes</l><block s="reportNewList"><list><block var="DO7"/><block var="SILENCE"/><block var="SILENCE"/><block var="SOL6"/><block var="SILENCE"/><block var="SILENCE"/><block var="MI6"/><block var="SILENCE"/><block var="SILENCE"/><block var="LA6"/><block var="SILENCE"/><block var="SI6"/><block var="SILENCE"/><block var="LA6#"/><block var="LA6"/><block var="SILENCE"/></list></block></block><block s="doSetVar"><l>partition_temps</l><block s="reportNewList"><list><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l></list></block></block></script></block><block s="doIf"><block s="reportEquals"><block var="melodie"/><l>5</l></block><script><block s="doSetVar"><l>partition_notes</l><block s="reportNewList"><list><block var="MI7"/><block var="MI7"/><block var="SILENCE"/><block var="MI7"/><block var="SILENCE"/><block var="DO7"/><block var="MI7"/><block var="SILENCE"/><block var="SOL7"/><block var="SILENCE"/><block var="SILENCE"/><block var="SILENCE"/><block var="SOL6"/><block var="SILENCE"/><block var="SILENCE"/><block var="SILENCE"/></list></block></block><block s="doSetVar"><l>partition_temps</l><block s="reportNewList"><list><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l></list></block></block></script></block><block s="doIf"><block s="reportEquals"><block var="melodie"/><l>4</l></block><script><block s="doSetVar"><l>partition_notes</l><block s="reportNewList"><list><block var="RE4#"/><block var="DO4#"/><block var="RE4"/><block var="DO4"/><block var="RE4#"/><block var="RE4#"/><block var="SOL3#"/><block var="SOL3"/><block var="DO4#"/><block var="DO4"/><block var="FA4#"/><block var="FA4"/><block var="MI3"/><block var="LA4#"/><block var="LA4"/><block var="SOL4#"/><block var="RE4#"/><block var="SI3"/><block var="LA3#"/><block var="LA3"/><block var="SOL3#"/><block var="SILENCE"/><block var="SILENCE"/><block var="SILENCE"/></list></block></block><block s="doSetVar"><l>partition_temps</l><block s="reportNewList"><list><l>18</l><l>18</l><l>18</l><l>6</l><l>6</l><l>6</l><l>6</l><l>6</l><l>6</l><l>18</l><l>18</l><l>18</l><l>18</l><l>18</l><l>18</l><l>10</l><l>10</l><l>10</l><l>10</l><l>10</l><l>10</l><l>3</l><l>3</l><l>3</l></list></block></block></script></block><block s="doIf"><block s="reportEquals"><block var="melodie"/><l>3</l></block><script><block s="doSetVar"><l>partition_notes</l><block s="reportNewList"><list><block var="FA3"/><block var="FA4"/><block var="RE3"/><block var="RE4"/><block var="RE3#"/><block var="RE4#"/><block var="SILENCE"/><block var="SILENCE"/></list></block></block><block s="doSetVar"><l>partition_temps</l><block s="reportNewList"><list><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>6</l><l>6</l></list></block></block></script></block><block s="doIf"><block s="reportEquals"><block var="melodie"/><l>2</l></block><script><block s="doSetVar"><l>partition_notes</l><block s="reportNewList"><list><block var="FA3"/><block var="FA4"/><block var="RE3"/><block var="RE4"/><block var="RE3#"/><block var="RE4#"/><block var="SILENCE"/><block var="SILENCE"/></list></block></block><block s="doSetVar"><l>partition_temps</l><block s="reportNewList"><list><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>6</l><l>3</l></list></block></block></script></block><block s="doIf"><block s="reportEquals"><block var="melodie"/><l>1</l></block><script><block s="doSetVar"><l>partition_notes</l><block s="reportNewList"><list><block var="DO4"/><block var="DO5"/><block var="LA3"/><block var="LA4"/><block var="LA3#"/><block var="LA4#"/><block var="SILENCE"/><block var="SILENCE"/></list></block></block><block s="doSetVar"><l>partition_temps</l><block s="reportNewList"><list><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>12</l><l>6</l><l>3</l></list></block></block></script></block><custom-block s="for %upvar = %n to %n %cs"><l>i</l><l>1</l><block s="reportListLength"><block var="partition_notes"/></block><script><block s="doIfElse"><block s="reportEquals"><block s="reportListItem"><block var="i"/><block var="partition_notes"/></block><block var="SILENCE"/></block><script><custom-block s="$robot Arreter le son pendant %n ms"><block s="reportRound"><block s="reportQuotient"><block var="quaternote_duration_s"/><block s="reportListItem"><block var="i"/><block var="partition_temps"/></block></block></block></custom-block></script><script><custom-block s="$robot Jouer un son à la fréquence de %n kHz et de durée %n ms"><block s="reportListItem"><block var="i"/><block var="partition_notes"/></block><block s="reportRound"><block s="reportQuotient"><block var="quaternote_duration_ms"/><block s="reportListItem"><block var="i"/><block var="partition_temps"/></block></block></block></custom-block><custom-block s="$robot Arreter le son pendant %n ms"><block s="reportRound"><block s="reportQuotient"><block var="quaternote_duration_s"/><block s="reportListItem"><block var="i"/><block var="partition_temps"/></block></block></block></custom-block></script></block></script></custom-block></script><scripts><script x="520" y="44.19999999999982"><block s="doIf"><block s="reportEquals"><block var="melodie"/><l>8</l></block><script><block s="doSetVar"><l>partition_notes</l><block s="reportNewList"><list><l></l><l></l><l></l><l></l><l></l><l></l><l></l><l></l></list></block></block><block s="doSetVar"><l>partition_temps</l><block s="reportNewList"><list><l></l><l></l><l></l><l></l><l></l><l></l><l></l><l></l></list></block></block></script></block></script><script x="242.000003" y="2007.0000040000002"><block var="DO4#"/></script><script x="173.000003" y="2009.0000040000002"><block var="RE4#"/></script><script x="242" y="279.2"><block s="doIf"><block s="reportEquals"><block var="melodie"/><l>8</l></block><script><block s="doSetVar"><l>partition_notes</l><block s="reportNewList"><list><l></l><l></l><l></l><l></l><l></l><l></l><l></l><l></l></list></block></block><block s="doSetVar"><l>partition_temps</l><block s="reportNewList"><list><l></l><l></l><l></l><l></l><l></l><l></l><l></l><l></l></list></block></block></script></block></script></scripts></block-definition><block-definition s="$robot Arreter le son pendant %&apos;ms&apos; ms" type="command" category="sound"><header></header><code></code><translations></translations><inputs><input type="%n"></input></inputs><script><custom-block s="$robot Arrêter le son"></custom-block><block s="doWait"><block var="ms"/></block></script></block-definition><block-definition s="$robot Jouer &quot;Mario Underground&quot;" type="command" category="sound"><header></header><code></code><translations></translations><inputs></inputs><script><custom-block s="$robot Jouer la mélodie n° %n"><l>1</l></custom-block><custom-block s="$robot Jouer la mélodie n° %n"><l>1</l></custom-block><custom-block s="$robot Jouer la mélodie n° %n"><l>2</l></custom-block><custom-block s="$robot Jouer la mélodie n° %n"><l>3</l></custom-block><custom-block s="$robot Jouer la mélodie n° %n"><l>4</l></custom-block></script></block-definition><block-definition s="$robot Jouer &quot;Mario Theme&quot;" type="command" category="sound"><header></header><code></code><translations></translations><inputs></inputs><script><custom-block s="$robot Jouer la mélodie n° %n"><l>5</l></custom-block><custom-block s="$robot Jouer la mélodie n° %n"><l>6</l></custom-block><custom-block s="$robot Jouer la mélodie n° %n"><l>7</l></custom-block><custom-block s="$robot Jouer la mélodie n° %n"><l>6</l></custom-block><custom-block s="$robot Jouer la mélodie n° %n"><l>7</l></custom-block></script></block-definition><block-definition s="Affiche un carre en javascript x %&apos;x&apos; y %&apos;y&apos; Largeur %&apos;largeur&apos; Hauteur %&apos;hauteur&apos;" type="command" category="pen"><header></header><code></code><translations></translations><inputs><input type="%n">-50</input><input type="%n">-50</input><input type="%n">50</input><input type="%n">50</input></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l>x</l><l>y</l><l>largeur</l><l>hauteur</l></list><l>var stage = this.parentThatIsA(StageMorph),&#xD;    context = stage.penTrails().getContext(&apos;2d&apos;),&#xD;    rotation = radians(this.direction() - 90),&#xD;    trans = new Point(&#xD;      this.center().x - stage.left(),&#xD;      this.center().y - stage.top()&#xD;    ),&#xD;    ide = this.parentThatIsA(IDE_Morph),&#xD;    isWarped = this.Warped,&#xD;    len,&#xD;    pos;&#xD;&#xD;if (isWarped) {endWarp(); }&#xD;context.save();&#xD;trans = trans.multiplyBy(1 / stage.scale);&#xD;context.translate(trans.x, trans.y);&#xD;context.rotate(rotation);&#xD;&#xD;&#xD;&#xD;// mon code javascript est ici&#xD;context.fillStyle = "#FF0000";&#xD;context.fillRect(x,-y,largeur,-hauteur);&#xD;&#xD;&#xD;&#xD;// Fin du code modifiable&#xD;context.translate(-trans.x, -trans.y);&#xD;context.restore();&#xD;this.changed();&#xD;if (isWarped) {this.startWarp(); }&#xD;stage.changed();</l></block><list><block var="x"/><block var="y"/><block var="largeur"/><block var="hauteur"/></list></block></script></block-definition><block-definition s="Ecrire %&apos;text&apos; à la taille %&apos;size&apos; en x %&apos;x&apos; et y %&apos;y&apos;" type="command" category="pen"><header></header><code></code><translations></translations><inputs><input type="%txt">Bonjour !</input><input type="%n">12</input><input type="%n">0</input><input type="%n">0</input></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l>text</l><l>size</l><l>x</l><l>y</l></list><l>var stage = this.parentThatIsA(StageMorph),&#xD;    context = stage.penTrails().getContext(&apos;2d&apos;),&#xD;    rotation = radians(this.direction() - 90),&#xD;    trans = new Point(&#xD;      this.center().x - stage.left(),&#xD;      this.center().y - stage.top()&#xD;    ),&#xD;    ide = this.parentThatIsA(IDE_Morph),&#xD;    isWarped = this.Warped,&#xD;    len,&#xD;    pos;&#xD;&#xD;if (isWarped) {endWarp(); }&#xD;context.save();&#xD;context.font = size + &apos;px monospace&apos;;&#xD;context.textAlign = &apos;left&apos;;&#xD;context.textBaseline = &apos;alphabetic&apos;;&#xD;context.fillStyle = this.color.toString();&#xD;len = context.measureText(text).width;&#xD;trans = trans.multiplyBy(1 / stage.scale);&#xD;context.translate(trans.x, trans.y);&#xD;context.rotate(rotation);&#xD;context.fillText(text,x ,-y );&#xD;context.translate(-trans.x, -trans.y);&#xD;context.restore();&#xD;&#xD;this.changed();&#xD;if (isWarped) {this.startWarp(); }&#xD;stage.changed();</l></block><list><block var="text"/><block var="size"/><block var="x"/><block var="y"/></list></block></script></block-definition><block-definition s="Affiche une image en javascript x %&apos;x&apos; y %&apos;y&apos;" type="command" category="pen"><header></header><code></code><translations></translations><inputs><input type="%n">0</input><input type="%n">0</input></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l>x</l><l>y</l></list><l>var stage = this.parentThatIsA(StageMorph),&#xD;    context = stage.penTrails().getContext(&apos;2d&apos;),&#xD;    rotation = radians(this.direction() - 90),&#xD;    trans = new Point(&#xD;      this.center().x - stage.left(),&#xD;      this.center().y - stage.top()&#xD;    ),&#xD;    ide = this.parentThatIsA(IDE_Morph),&#xD;    isWarped = this.Warped,&#xD;    len,&#xD;    pos;&#xD;&#xD;if (isWarped) {endWarp(); }&#xD;context.save();&#xD;trans = trans.multiplyBy(1 / stage.scale);&#xD;context.translate(trans.x, trans.y);&#xD;context.rotate(rotation);&#xD;&#xD;&#xD;&#xD;// mon code javascript est ici&#xD;function doCanvas() {&#xD;    /* draw something */&#xD;    context.fillStyle = &apos;#f90&apos;;&#xD;    context.fillRect(0, 0, stage.penTrails().width, stage.penTrails().height);&#xD;    context.fillStyle = &apos;#fff&apos;;&#xD;    context.font = &apos;60px sans-serif&apos;;&#xD;    context.fillText(&apos;Code Project&apos;, 10, stage.penTrails().height / 2 - 15);&#xD;    context.font = &apos;26px sans-serif&apos;;&#xD;    context.fillText(&apos;Click link below to save this as image&apos;, 15,stage.penTrails().height/2+35);&#xD;}&#xD;&#xD;function downloadCanvas(link, canvasId, filename) {&#xD;    link.href = document.getElementById(canvasId).toDataURL();&#xD;    link.download = filename;&#xD;}&#xD;&#xD;downloadCanvas(this,stage.penTrails(),&apos;test.png&apos;);&#xD;doCanvas();&#xD;&#xD;&#xD;// Fin du code modifiable&#xD;context.translate(-trans.x, -trans.y);&#xD;context.restore();&#xD;this.changed();&#xD;if (isWarped) {this.startWarp(); }&#xD;stage.changed();</l></block><list><block var="x"/><block var="y"/></list></block></script></block-definition><block-definition s="Ecrire %&apos;text&apos; à la taille %&apos;size&apos;" type="command" category="pen"><header></header><code></code><translations></translations><inputs><input type="%txt">Bonjour !</input><input type="%n">12</input></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l>text</l><l>size</l></list><l>var stage = this.parentThatIsA(StageMorph),&#xD;    context = stage.penTrails().getContext(&apos;2d&apos;),&#xD;    rotation = radians(this.direction() - 90),&#xD;    trans = new Point(&#xD;      this.center().x - stage.left(),&#xD;      this.center().y - stage.top()&#xD;    ),&#xD;    ide = this.parentThatIsA(IDE_Morph),&#xD;    isWarped = this.Warped,&#xD;    len,&#xD;    pos;&#xD;&#xD;if (isWarped) {endWarp(); }&#xD;context.save();&#xD;context.font = size + &apos;px monospace&apos;;&#xD;context.textAlign = &apos;left&apos;;&#xD;context.textBaseline = &apos;alphabetic&apos;;&#xD;context.fillStyle = this.color.toString();&#xD;len = context.measureText(text).width;&#xD;trans = trans.multiplyBy(1 / stage.scale);&#xD;context.translate(trans.x, trans.y);&#xD;context.rotate(rotation);&#xD;context.fillText(text, 0, 0);&#xD;context.translate(-trans.x, -trans.y);&#xD;context.restore();&#xD;pos = new Point(&#xD;  len * Math.sin(radians(this.direction())),&#xD;  len * Math.cos(radians(this.direction())));&#xD;pos = pos.add(new Point(this.xPosition(), this.yPosition()));&#xD;this.gotoXY(pos.x, pos.y, false);&#xD;this.changed();&#xD;if (isWarped) {this.startWarp(); }&#xD;stage.changed();</l></block><list><block var="text"/><block var="size"/></list></block></script></block-definition></blocks>